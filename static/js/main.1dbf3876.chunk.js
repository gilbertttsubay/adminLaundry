(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{47:function(e,t,n){e.exports=n.p+"static/media/logo.69029720.png"},57:function(e,t,n){e.exports=n(85)},63:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(16),c=n.n(l),o=(n(62),n(63),n(6)),i=n(7),s=n(9),u=n(8),m=n(21),d=n(23),h=n.n(d),p=(n(64),n(66),{apiKey:"AIzaSyD8Sy3D2E73XW_FyxIQqvCEgj1AQQ2NQco",authDomain:"laundrymockup.firebaseapp.com",databaseURL:"https://laundrymockup.firebaseio.com",projectId:"laundrymockup",storageBucket:"laundrymockup.appspot.com"}),f=function e(){var t=this;Object(o.a)(this,e),this.adminsDb=function(){return t.db.collection("admins")},this.usersDb=function(){return t.db.collection("customers")},this.transactionDb=function(){return t.db.collection("transactions")},this.loginFirebaseUser=function(e){return t.auth.signInWithEmailAndPassword(e.email,e.password)},this.logoutFirebaseUser=function(){return t.auth.signOut()},h.a.initializeApp(p),this.auth=h.a.auth(),this.fieldValue=h.a.firestore.FieldValue,this.db=h.a.firestore()},b=r.a.createContext(null),E=(n(70),n(87)),g=n(88),v=n(89),O=n(90),j=(n(71),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(m.b,{to:this.props.link,onClick:this.props.onClick},r.a.createElement("div",{className:"btn-menu"},this.props.label))}}]),n}(a.Component)),y=n(17),L=function(e){return{type:"LOGIN",payload:e}},k=n(47),w=n.n(k),C=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).logoutHandler=function(){var e=a.props.firebase.logoutFirebaseUser,t=a.props.doLogout;e().then((function(){t(),alert("Logout Success")})).catch((function(e){alert(e.type),console.log(e.message)}))},a.state={},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.isLogin;return r.a.createElement(E.a,null,r.a.createElement(g.a,{className:"container-list"},r.a.createElement(v.a,{className:"container-logo",xs:12,sm:12,md:2},r.a.createElement(O.a,{className:"logo",src:w.a,alt:"Logo",fluid:!0})),e?r.a.createElement(v.a,{className:"container-menu",xs:12,sm:12,md:{span:4,offset:7}},r.a.createElement(j,{link:"/admin/order",label:"Order"}),r.a.createElement(j,{link:"/admin/userlist",label:"User"}),r.a.createElement(j,{link:"/",label:"Logout",onClick:this.logoutHandler})):r.a.createElement(v.a,{className:"container-menu",xs:12,sm:12,md:{span:2,offset:8}},r.a.createElement(j,{link:"/",label:"Home"}),r.a.createElement(j,{link:"/login",label:"Login"}))))}}]),n}(a.Component),N=Object(y.b)((function(e){return{userOnLogin:e.authReducer.userOnLogin,isLogin:e.authReducer.isLogin}}),(function(e){return{doLogout:function(){return e({type:"LOGOUT"})}}}))(C),S=n(5),D=n(26),I=n(94),H=n(93),U=n(91),T=n(92),x=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).acceptanceHandler=function(e,t,n){var r=a.props.firebase.transactionDb;"pending"===e.status?r().doc(n).collection("orders").doc(t).update({order:JSON.stringify({item_weigh:e.item_weigh,cost:e.cost,service:e.service,duration:e.duration,status:"diproses"})}).then(window.location.reload()).catch((function(e){return console.log(e)})):"diproses"===e.status&&r().doc(n).collection("orders").doc(t).update({order:JSON.stringify({item_weigh:e.item_weigh,cost:e.cost,service:e.service,duration:e.duration,status:"selesai"})}).then(window.location.reload()).catch((function(e){return console.log(e)}))},a.renderOrder=function(e,t){var n=e.orderID,l=e.username,c=e.order,o=JSON.parse(c);if(o.status===a.props.status)return r.a.createElement("tr",{key:t},r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,o.item_weigh),r.a.createElement("td",null,o.cost),r.a.createElement("td",null,o.service),r.a.createElement("td",null,o.duration),r.a.createElement("td",null,o.cost*o.item_weigh),r.a.createElement("td",null,o.status),"pending"===a.props.status?r.a.createElement("td",null,r.a.createElement(U.a,{onClick:function(){return a.acceptanceHandler(o,n,e.username)}},"Accept")):"diproses"===a.props.status?r.a.createElement("td",null,r.a.createElement(U.a,{onClick:function(){return a.acceptanceHandler(o,n,e.username)}},"Selesai")):r.a.createElement("td",null,"Order Selesai"))},a.state={collection:[],orderList:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase.transactionDb;t().get().then((function(n){var a=[],r=[];n.forEach((function(e){var t=e.id;a.push(t)})),e.setState({collection:a});for(var l=function(n){t().doc("".concat(e.state.collection[n])).collection("orders").get().then((function(t){t.forEach((function(t){var a=t.data();a.orderID=t.id,a.username=e.state.collection[n],r.push(a)})),e.setState({orderList:r})}))},c=0;c<e.state.collection.length;c++)l(c);console.log(e.state.orderList)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Order ID"),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Berat Item"),r.a.createElement("th",null,"Biaya"),r.a.createElement("th",null,"Jenis Layanan"),r.a.createElement("th",null,"Durasi"),r.a.createElement("th",null,"Total Biaya"),r.a.createElement("th",null,"Status"))),r.a.createElement("tbody",null,this.state.orderList.map(this.renderOrder))))}}]),n}(a.Component),_=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={activeTab:"incoming"},a.handleTab=a.handleTab.bind(Object(D.a)(a)),a}return Object(i.a)(n,[{key:"handleTab",value:function(e){this.setState((function(){return{activeTab:e}}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(I.a,{id:"order-tab",activeKey:this.state.activeTab,onSelect:this.handleTab},r.a.createElement(H.a,{eventKey:"incoming",title:"Incoming Order"},r.a.createElement(b.Consumer,null,(function(t){return r.a.createElement(x,Object.assign({},e.props,{firebase:t,status:"pending"}))}))),r.a.createElement(H.a,{eventKey:"ongoing",title:"Ongoing Order"},r.a.createElement(b.Consumer,null,(function(t){return r.a.createElement(x,Object.assign({},e.props,{firebase:t,status:"diproses"}))}))),r.a.createElement(H.a,{eventKey:"history",title:"Order History"},r.a.createElement(b.Consumer,null,(function(t){return r.a.createElement(x,Object.assign({},e.props,{firebase:t,status:"selesai"}))})))))}}]),n}(a.Component),A=n(40),B=n(29),F=(n(81),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this)).state={},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(b.Consumer,null,(function(t){return r.a.createElement(J,Object.assign({},e.props,{firebase:t}))}))}}]),n}(a.Component)),J=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).setValue=function(e){a.setState(Object(B.a)({},e.name,e.value))},a.loginHandler=function(){var e=a.state,t=e.email,n=e.password,r=a.props.doLogin,l=a.props.firebase,c=l.loginFirebaseUser,o=l.usersDb;return""===t?alert("Email Harus diisi!"):""===n?alert("Password Harus diisi!"):void c({email:t,password:n}).then((function(e){e.user&&(o().doc(e.user.uid).get().then((function(t){r(Object(A.a)(Object(A.a)({},t.data()),{},{uid:e.user.uid}))})).then((function(){window.location.reload()})),alert("Login Success"))})).catch((function(e){console.error(e),alert(e.message)}))},a.state={email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-page"},r.a.createElement("div",{className:"container-login"},r.a.createElement("h2",null," Login "),r.a.createElement("div",{className:"container-input"},r.a.createElement("input",{className:"input",placeholder:"Input your Username",type:"email",name:"email",onChange:function(t){return e.setValue(t.target)}}),r.a.createElement("input",{className:"input",placeholder:"Input your Password",type:"password",name:"password",onChange:function(t){return e.setValue(t.target)}})),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"buttonLogin",onClick:this.loginHandler},r.a.createElement("span",{className:"wordLogin"},"Login")))))}}]),n}(a.Component),R=Object(y.b)(null,(function(e){return{doLogin:function(t){return e(L(t))}}}))(F),K=(n(82),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).renderPlayer=function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.position),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.team))},a.state={userList:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase.usersDb;console.log(t),t().get().then((function(t){var n=[];t.forEach((function(e){var t=e.data();n.push(t)})),e.setState({userList:n})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Alamat"))),r.a.createElement("tbody",null,this.state.userList.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{className:"avatar",src:e.photo,alt:"avatar"})),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.alamat))})))))}}]),n}(a.Component)),P=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-page"},r.a.createElement("h2",null,"Clean Laundry"))}}]),n}(a.Component),V=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.isLogin;return r.a.createElement(S.d,null,r.a.createElement(S.b,{exact:!0,path:"/"},t?r.a.createElement(S.a,{to:"/admin/order"}):r.a.createElement(P,null)),r.a.createElement(S.b,{exact:!0,path:"/login"},t?r.a.createElement(S.a,{to:"/admin/order"}):r.a.createElement(R,null)),r.a.createElement(S.b,{path:"/admin/order"},t?r.a.createElement(_,null):r.a.createElement(S.a,{to:"/"})),r.a.createElement(S.b,{path:"/admin/userlist"},t?r.a.createElement(b.Consumer,null,(function(t){return r.a.createElement(K,Object.assign({},e.props,{firebase:t}))})):r.a.createElement(S.a,{to:"/"})))}}]),n}(a.Component),z=Object(y.b)((function(e){return{userOnLogin:e.authReducer.userOnLogin,isLogin:e.authReducer.isLogin}}),(function(e){return{doLogin:function(t){return e(L(t))}}}))(V),G=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={},a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(b.Consumer,null,(function(e){return r.a.createElement(N,{firebase:e})})),r.a.createElement(b.Consumer,null,(function(e){return r.a.createElement(z,{firebase:e})})))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=n(15),W=n(41),M=n(53),q=n.n(M),X={userOnLogin:null,isLogin:!1},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{userOnLogin:t.payload,isLogin:!0};case"LOGOUT":return{userOnLogin:null,isLogin:!1};default:return e}},Y=Object(Q.b)({authReducer:$}),Z={key:"root",storage:q.a},ee=Object(W.a)(Z,Y),te=Object(Q.c)(ee),ne=Object(W.b)(te),ae=n(54);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y.a,{store:te},r.a.createElement(ae.a,{loading:null,persistor:ne},r.a.createElement(b.Provider,{value:new f},r.a.createElement(G,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[57,1,2]]]);
//# sourceMappingURL=main.1dbf3876.chunk.js.map